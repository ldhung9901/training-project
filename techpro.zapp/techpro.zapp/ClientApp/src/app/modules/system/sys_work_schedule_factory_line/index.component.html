<mat-progress-bar *ngIf="pageLoading" mode="indeterminate" class="absolute top-0"></mat-progress-bar>
<div class="flex flex-col flex-auto min-w-0 ">
    <!-- Main -->
    <div class="flex-auto p-3 sm:pt-3 sm:p-10">
        <!-- CONTENT GOES HERE -->
        <div class="rounded-2xl">
    <h1 mat-dialog-title class="dark:text-white" transloco="NAV.sys_work_schedule_factory_line"></h1>
     <div class="p-6 bg-card shadow rounded-2xl overflow-hidden">
        <div class="flex flex-col md:flex-row lg:flex-row md:space-x-4 flex-wrap">
            <div class="flex-1">
                <cm_select [label]="'NAV.sys_factory'"
                           [listData]="listfactory"
                           [callbackChange]="bind_data_factory.bind(this)"
                           [(model)]="filter.id_sys_factory"></cm_select>
            </div>
            <div class="flex-1">
                <cm_select [label]="'NAV.sys_factory_line'"
                           [listData]="listfactoryline"
                           [callbackChange]="rerender.bind(this)"
                           [(model)]="filter.id_sys_factory_line"></cm_select>
            </div>

        </div>
        <br />

    </div>



    <br />
     <div class="p-6 bg-card shadow rounded-2xl overflow-hidden">
        <div class="w-full">
            <nz-table nzBordered nzSize="small" nzShowSizeChanger [nzData]="listData"  [nzFrontPagination]="false" [nzLoading]="pageLoading"
                        [nzTotal]="total" [nzPageSize]="pageSize" [nzPageIndex]="pageIndex"
                        (nzQueryParams)="onQueryParamsChange($event)">
                <thead>
                    <tr>
                        <th></th>
                        <th transloco="system.daysOfWeek"></th>
                        <th transloco="system.timeStart_1"></th>
                        <th transloco="system.timeEnd_1"></th>
                        <th transloco="system.timeStart_2"></th>
                        <th transloco="system.timeEnd_2"></th>
                        <th transloco="system.timeStart_3"></th>
                        <th transloco="system.timeEnd_3"></th>
                        <th transloco="system.note"></th>
                        <!--<th transloco="system.trang_thai"></th>-->
                        <!--<th></th>-->
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of listData;  index as i;">
                        <td *ngIf="item.db.daysOfWork == 1; else templateNone">
                            <div class="flex flex-col md:flex-row lg:flex-row md:space-x-4 flex-wrap">

                                <button class="dark:bg-red-900 ring-white ring-2 dark:hover:bg-red-700 dark:ring-red-600 bg-red-600 text-white shadow-none hover:bg-red-700" mat-raised-button transloco="copy" (click)="saoChep(item)"></button>
                                <button style="margin-left:2px" class="dark:bg-red-900 ring-white ring-2 dark:hover:bg-red-700 dark:ring-red-600 bg-red-600 text-white shadow-none hover:bg-red-700" mat-raised-button transloco="reset" (click)="reset(item)"></button>

                            </div>
                        </td>
                        <ng-template #templateNone>
                            <td></td>
                        </ng-template>
                        <td>
                            <cm_input [errorModel]="errorModel"
                                      [actionEnum]="actionEnum"
                                      [actionEnum]="actionEnum"
                                      [(model)]="item.day_name"></cm_input>


                        </td>
                        <td>
                            <cm_input [errorModel]="errorModel"
                                      [actionEnum]="actionEnum"
                                      [type]="'time'"
                                      [keyError]="'timeStart_1'+i"
                                      [(model)]="item.db.timeStart_1"></cm_input>

                        </td>
                        <td>
                            <cm_input [errorModel]="errorModel"
                                      [actionEnum]="actionEnum"
                                      [type]="'time'"
                                      [keyError]="'timeEnd_1'+i"
                                      [(model)]="item.db.timeEnd_1"></cm_input>

                        </td>
                        <td>
                            <cm_input [errorModel]="errorModel"
                                      [actionEnum]="actionEnum"
                                      [type]="'time'"
                                      [keyError]="'timeStart_2'+i"
                                      [(model)]="item.db.timeStart_2"></cm_input>
                        </td>
                        <td>
                            <cm_input [errorModel]="errorModel"
                                      [actionEnum]="actionEnum"
                                      [type]="'time'"
                                      [keyError]="'timeEnd_2'+i"
                                      [(model)]="item.db.timeEnd_2"></cm_input>
                        </td>
                        <td>
                            <cm_input [errorModel]="errorModel"
                                      [actionEnum]="actionEnum"
                                      [type]="'time'"
                                      [keyError]="'timeStart_3'+i"
                                      [(model)]="item.db.timeStart_3"></cm_input>
                        </td>
                        <td>
                            <cm_input [errorModel]="errorModel"
                                      [actionEnum]="actionEnum"
                                      [type]="'time'"
                                      [keyError]="'timeEnd_3'+i"
                                      [(model)]="item.db.timeEnd_3"></cm_input>
                        </td>

                        <td>
                            <cm_input [errorModel]="errorModel"
                                      [actionEnum]="actionEnum"
                                      [keyError]="'item.db.note'"
                                      [(model)]="item.db.note"></cm_input>

                        </td>


                    </tr>
                </tbody>

            </nz-table>
        </div>


        <div align="end">
            <button class="dark:bg-teal-900 ring-white ring-2 dark:hover:bg-teal-700 dark:ring-teal-600 bg-teal-400 text-white shadow-none hover:bg-teal-600" mat-raised-button [disabled]="loading" mat-button (click)="saveConfig()" transloco="save"></button>

        </div>
    </div>

</div>
</div></div>
